import{_ as i}from"./chunks/plugin-vue_export-helper.DlAUqK2U.js";import{c as a,o as e,X as n}from"./chunks/vendor-vueuse.XPft87tp.js";const F=JSON.parse('{"title":"一行代码，让网页变为黑白配色","description":"","frontmatter":{},"headers":[],"relativePath":"fragment/黑白.md","filePath":"fragment/黑白.md","lastUpdated":1771466668000}'),l={name:"fragment/黑白.md"};function t(p,s,h,r,k,d){return e(),a("div",null,s[0]||(s[0]=[n(`<h1 id="一行代码-让网页变为黑白配色" tabindex="-1">一行代码，让网页变为黑白配色 <a class="header-anchor" href="#一行代码-让网页变为黑白配色" aria-label="Permalink to &quot;一行代码，让网页变为黑白配色&quot;">​</a></h1><p>让网页变为黑白配色，是个常见的诉求。而且往往是突如其来的诉求，是无法预知的。当发生这样的需求时，我们需要迅速完成变更发布。</p><h2 id="一行代码" tabindex="-1">一行代码 <a class="header-anchor" href="#一行代码" aria-label="Permalink to &quot;一行代码&quot;">​</a></h2><div class="language-css vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes dracula vitesse-black vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#FF79C6;--shiki-dark:#4D9375;">div</span><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;"> {</span></span>
<span class="line"><span style="--shiki-light:#8BE9FD;--shiki-dark:#B8A965;">  filter</span><span style="--shiki-light:#FF79C6;--shiki-dark:#444444;">:</span><span style="--shiki-light:#8BE9FD;--shiki-dark:#B8A965;"> grayscale</span><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">(</span><span style="--shiki-light:#BD93F9;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">);</span></span>
<span class="line"><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>为了使整个网页生效，你可以把它放在 <code>&lt;html&gt;</code> 标签的样式里。直接写到 html 文件内，例如：</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes dracula vitesse-black vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">&lt;</span><span style="--shiki-light:#FF79C6;--shiki-dark:#4D9375;">style</span><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#FF79C6;--shiki-dark:#4D9375;">  html</span><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;"> {</span></span>
<span class="line"><span style="--shiki-light:#8BE9FD;--shiki-dark:#B8A965;">    filter</span><span style="--shiki-light:#FF79C6;--shiki-dark:#444444;">:</span><span style="--shiki-light:#8BE9FD;--shiki-dark:#B8A965;"> grayscale</span><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">(</span><span style="--shiki-light:#BD93F9;--shiki-dark:#4C9A91;">1</span><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">);</span></span>
<span class="line"><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">  }</span></span>
<span class="line"><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">&lt;/</span><span style="--shiki-light:#FF79C6;--shiki-dark:#4D9375;">style</span><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>你也可以用内联样式，只要没用 important CSS 语法，内联样式优先级最高：</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes dracula vitesse-black vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">&lt;</span><span style="--shiki-light:#FF79C6;--shiki-dark:#4D9375;">html</span><span style="--shiki-light:#50FA7B;--shiki-light-font-style:italic;--shiki-dark:#BD976A;--shiki-dark-font-style:inherit;"> style</span><span style="--shiki-light:#FF79C6;--shiki-dark:#444444;">=</span><span style="--shiki-light:#E9F284;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#F1FA8C;--shiki-dark:#C98A7D;">filter:grayscale(1)</span><span style="--shiki-light:#E9F284;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#F8F8F2;--shiki-dark:#DBD7CACC;">  ...</span></span>
<span class="line"><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">&lt;/</span><span style="--shiki-light:#FF79C6;--shiki-dark:#4D9375;">html</span><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>为了更好的兼容性，你可以补一个带 -webkit- 前缀的样式，放在 filter 后面：</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes dracula vitesse-black vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">&lt;</span><span style="--shiki-light:#FF79C6;--shiki-dark:#4D9375;">html</span><span style="--shiki-light:#50FA7B;--shiki-light-font-style:italic;--shiki-dark:#BD976A;--shiki-dark-font-style:inherit;"> style</span><span style="--shiki-light:#FF79C6;--shiki-dark:#444444;">=</span><span style="--shiki-light:#E9F284;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#F1FA8C;--shiki-dark:#C98A7D;">filter:grayscale(1);-webkit-filter:grayscale(1)</span><span style="--shiki-light:#E9F284;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#F8F8F2;--shiki-dark:#DBD7CACC;">  ...</span></span>
<span class="line"><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">&lt;/</span><span style="--shiki-light:#FF79C6;--shiki-dark:#4D9375;">html</span><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="原理" tabindex="-1">原理 <a class="header-anchor" href="#原理" aria-label="Permalink to &quot;原理&quot;">​</a></h2><p>我们使用了 CSS 特性 filter，并用了 grayscale 对图片进行灰度转换，允许有一个参数，可以是数字（0 到 1）或百分比，0% 到 100% 之间的值会使灰度线性变化。</p><p>如果你不想完全灰掉。可以设置个相对小的数字。</p><h2 id="兼容性" tabindex="-1">兼容性 <a class="header-anchor" href="#兼容性" aria-label="Permalink to &quot;兼容性&quot;">​</a></h2><p>我们使用了 CSS 特性 filter，兼容性还不错</p><p>如果你想获得更好的兼容性，可以加一个前缀 -webkit- ：</p><div class="language-css vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes dracula vitesse-black vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#FF79C6;--shiki-dark:#4D9375;">div</span><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;"> {</span></span>
<span class="line"><span style="--shiki-light:#8BE9FD;--shiki-dark:#B8A965;">  filter</span><span style="--shiki-light:#FF79C6;--shiki-dark:#444444;">:</span><span style="--shiki-light:#8BE9FD;--shiki-dark:#B8A965;"> grayscale</span><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">(</span><span style="--shiki-light:#BD93F9;--shiki-dark:#4C9A91;">0.95</span><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">);</span></span>
<span class="line"><span style="--shiki-light:#8BE9FD;--shiki-light-font-style:italic;--shiki-dark:#B8A965;--shiki-dark-font-style:inherit;">  -webkit-filter</span><span style="--shiki-light:#FF79C6;--shiki-dark:#444444;">:</span><span style="--shiki-light:#8BE9FD;--shiki-dark:#B8A965;"> grayscale</span><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">(</span><span style="--shiki-light:#BD93F9;--shiki-dark:#4C9A91;">0.95</span><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">);</span></span>
<span class="line"><span style="--shiki-light:#F8F8F2;--shiki-dark:#444444;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="filter-样式加到-html-还是-body-上" tabindex="-1">filter 样式加到 html 还是 body 上 <a class="header-anchor" href="#filter-样式加到-html-还是-body-上" aria-label="Permalink to &quot;filter 样式加到 html 还是 body 上&quot;">​</a></h2><p>把 filter 样式加到了 <code>&lt;body&gt;</code> 元素上。通常这没有问题。</p><p>但如果你的网页内有「绝对和固定定位」元素，一定要把 filter 样式加到 <code>&lt;html&gt;</code> 上。 原因见: <a href="https://drafts.fxtf.org/filter-effects/#FilterProperty" target="_blank" rel="noreferrer">drafts.fxtf.org/filter-effe…</a></p><p>引用：</p><blockquote><p>A value other than none for the filter property results in the creation of a &gt;containing block for absolute and fixed positioned descendants unless the element it &gt; applies to is a document root element in the current browsing context.</p></blockquote><p>翻译：</p><blockquote><p>若 filter 属性的值不是 none，会给「绝对和固定定位的后代」创建一个 containing block</p><p>除非 filter 对应的元素是「当前浏览上下文中的文档根元素」（即 <code>&lt;html&gt;</code> ）。</p></blockquote><p>因此，兼容性最好的方法是把 filter 样式加到 <code>&lt;html&gt;</code> 上。这样不会影响「绝对和固定定位的后代」。 这里小程序有个坑，如果你的页面代码有「绝对和固定定位的后代」，就不能把 filter 样式 加到 <code>&lt;page&gt;</code> 上，而是要找个元素，这个元素没有「绝对和固定定位的后代」，你可以把 filter 样式加到这个元素上。</p>`,25)]))}const g=i(l,[["render",t]]);export{F as __pageData,g as default};
